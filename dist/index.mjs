import {jsPDF}from'jspdf';var M=(n=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(n,{get:(t,e)=>(typeof require!="undefined"?require:t)[e]}):n)(function(n){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var x=(n,t=false)=>{var i;let e,o;for(o=n.nodeType===3?document.createTextNode(n.nodeValue||""):n.cloneNode(false),e=n.firstChild;e;)(t===true||e.nodeType!==1||e.nodeName!=="SCRIPT")&&o.appendChild(x(e,t)),e=e.nextSibling;if(n.nodeType===1){if(n.nodeName==="CANVAS"){let r=n,a=o;a.width=r.width,a.height=r.height,(i=a.getContext("2d"))==null||i.drawImage(r,0,0);}else (n.nodeName==="TEXTAREA"||n.nodeName==="SELECT")&&(o.value=n.value);o.addEventListener("load",()=>{o.scrollTop=n.scrollTop,o.scrollLeft=n.scrollLeft;},true);}return o},u=(n,t={})=>{var a;let{className:e,innerHTML:o,style:i}=t,r=document.createElement(n);if(e&&(r.className=e),o){r.innerHTML=o;let l=r.getElementsByTagName("script"),s=l.length;for(;s-- >0;)(a=l[s].parentNode)==null||a.removeChild(l[s]);}return i&&w(r,i),r},w=(n,t)=>{Object.keys(t).forEach(e=>{n.style[e]=t[e];});},C=(n,t)=>{t.forEach(e=>{n.querySelectorAll(`.${e}`).forEach(o=>o.remove());});},P=(n,t)=>{t.forEach(e=>{var i;let o=n.getElementsByTagName(e);for(let r=o.length-1;r>=0;r--)o[r]&&((i=o[r].parentNode)==null||i.removeChild(o[r]));});};var N=(n,t)=>{var i;let e={before:false},o=n.getBoundingClientRect();if(!e.before){let r=Math.floor(o.top/t),a=Math.floor(o.bottom/t),l=Math.abs(o.bottom-o.top)/t;if(a!==r&&l<=1&&(e.before=true),e.before){let s=u("div",{style:{display:"block",height:`${t-o.top%t}px`}});(i=n.parentNode)==null||i.insertBefore(s,n);}}};var h=class h{constructor(t,e={}){this.originalElement=t,this.options={excludeClassNames:e.excludeClassNames||[],excludeTagNames:e.excludeTagNames||["button","input","select"],overrideWidth:e.overrideWidth||0};let{overlay:o,container:i}=this.createOverlayAndContainer();this.overlay=o,this.container=i;let r=h.A4_HEIGHT/h.A4_WIDTH,a=this.options.overrideWidth||this.container.getBoundingClientRect().width;this.pageHeightPx=Math.floor(a*r),this.setupContainer();}getContainer(){return this.container}getOverlay(){return this.overlay}getPageHeightPx(){return this.pageHeightPx}remove(){document.body.removeChild(this.overlay);}createOverlayAndContainer(){let t={position:"fixed",zIndex:"1000",opacity:"0",left:"0",right:"0",bottom:"0",top:"0",backgroundColor:"rgba(0,0,0,0.8)"};this.options.overrideWidth&&(t.width=`${this.options.overrideWidth}px`);let e={position:"absolute",left:"0",right:"0",top:"0",height:"auto",margin:"auto",overflow:"auto",backgroundColor:"white"},o=u("div",{style:t}),i=u("div",{style:e});return i.appendChild(x(this.originalElement)),o.appendChild(i),document.body.appendChild(o),{overlay:o,container:i}}setupContainer(){this.removeExcludedElements(),this.handlePageBreaks();}removeExcludedElements(){let{excludeClassNames:t,excludeTagNames:e}=this.options;C(this.container,t),P(this.container,e);}handlePageBreaks(){let t=this.container.querySelectorAll("*");Array.from(t).forEach(e=>{N(e,this.pageHeightPx);});}};h.A4_HEIGHT=841.89,h.A4_WIDTH=595.28;var v=h;var D=n=>{let t=document.createElement("canvas");t.width=n.width,t.height=n.height;let e=t.getContext("2d");return e&&(e.fillStyle="#FFFFFF",e.fillRect(0,0,t.width,t.height)),n.toDataURL()===t.toDataURL()},H=(n,t,e,o)=>{let i=e.getContext("2d");if(!i)throw new Error("Could not get canvas context");let r=e.width,a=e.height;return i.fillStyle="white",i.fillRect(0,0,r,a),i.drawImage(n,0,t*o,r,a,0,0,r,a),!D(e)};var k=M("dom-to-image"),g=class g{constructor(t,e={},o){this.container=t,this.callback=o,this.options={filename:e.filename||"generated.pdf",excludeClassNames:e.excludeClassNames||[],excludeTagNames:e.excludeTagNames||["button","input","select"],overrideWidth:e.overrideWidth||0,proxyUrl:e.proxyUrl||"",compression:e.compression||"NONE",scale:e.scale||0,output:e.output||"pdf"};}async generate(){try{let t=await this.generateCanvas();return this.generatePdfFromCanvas(t)}catch(t){return this.callback&&this.callback(null),console.error(t),null}}async generateCanvas(){let t=this.createDomToImageOptions();return k.toCanvas(this.container,t)}createDomToImageOptions(){let t={filter:this.createFilterFunction(),proxy:this.options.proxyUrl};if(this.options.scale){let e=this.container.offsetWidth,o=this.container.offsetHeight,i={transform:`scale(${this.options.scale})`,transformOrigin:"top left",width:`${e}px`,height:`${o}px`},r={width:e*this.options.scale,height:o*this.options.scale,quality:1,style:i};Object.assign(t,r);}return t}createFilterFunction(){let{excludeClassNames:t,excludeTagNames:e}=this.options;return ({classList:o,tagName:i})=>{if(o){for(let a of t)if(Array.prototype.indexOf.call(o,a)>=0)return  false}let r=i==null?void 0:i.toLowerCase();return r?e.indexOf(r)<0:true}}generatePdfFromCanvas(t){let{A4_WIDTH:e,A4_HEIGHT:o}=g,{compression:i,filename:r,output:a}=this.options,l=this.options.overrideWidth||this.container.getBoundingClientRect().width,s=Math.floor(l*(o/e)),c=new jsPDF({orientation:"p",unit:"pt",format:"a4"}),T=t.height,y=Math.ceil(T/s),m=document.createElement("canvas");m.width=t.width,m.height=s;for(let f=0;f<y;f++){let b=o;if(f===y-1&&T%s!==0&&(m.height=T%s,b=m.height*e/m.width),!H(t,f,m,s))continue;f>0&&c.addPage();let L=m.toDataURL("image/PNG");c.addImage(L,"PNG",0,0,e,b,void 0,i);}return this.callback&&this.callback(c),a==="blob"?c.output("blob"):a==="base64"?c.output("datauristring"):a==="pdf"?c.save(r):c}};g.A4_HEIGHT=841.89,g.A4_WIDTH=595.28;var E=g;var R=async(n,t={},e)=>{try{let o=new v(n,t),r=await new E(o.getContainer(),t,e).generate();return o.remove(),r}catch(o){return console.error("Error generating PDF:",o),e&&e(null),null}},ee=R;export{v as DomContainer,E as PdfGenerator,w as applyStyles,x as cloneNode,u as createElement,ee as default,R as domToPdf,H as drawPdfPage,D as isCanvasBlank,C as removeElementsByClassName,P as removeElementsByTagName};//# sourceMappingURL=index.mjs.map
//# sourceMappingURL=index.mjs.map